<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0 user-scalable=0">
    <title></title>
    <link rel="stylesheet" type="text/css" href="../ko/libs/css/master.css">
    <link rel="stylesheet" type="text/css" href="./common/css/guide.css">


    <style>
        header.twoLine .title-icon {
            top: -30px;
        }

        .letter-sp-2 {
            letter-spacing: -2px;
        }

        .page_1 img {
            height: 420px;
            margin: 0 auto;
            object-fit: contain;
        }

        .page_1 .noteText {
            height: 70px;
            width: 80%;
            margin: 10px auto;
            box-shadow: none;
            background-color: #f5f5f5;
            padding: 0;
        }

        .page_1 .noteText .textareaWrap {
            height: 100%;
        }

        .page_1 .noteText .textLine {
            line-height: 66px;
        }

        .page_1 .blueT {
            margin-top: 4px;
        }

        .page_1 .noteText .text-exam.flex-wrap {
            padding: 2px 0 0 20px;
        }

        .page_1 .noteText:after {
            display: none;
        }

        /* page 2 */
        .page_2 .noteText {
            margin-top: 40px;
            height: 420px;
        }

        .page_2 .noteText .text-exam.flex-wrap {
            overflow: hidden;
        }

        .noteText:after {
            z-index: 2;
        }

        #tsViewer .contentsStudy {
            height: 40px;
        }

        .noteText .text-exam.flex-wrap {
            padding-right: 20px;
        }

        .page_2 .underLine {
            position: relative;
            border-bottom: none;
        }

        .page_2 .underLine::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 2px;
            width: 102%;
            height: 1px;
            background-color: #cccccc;
        }
    </style>
</head>

<body>
    <div id="wrap" class="math">
        <header>
            <div class="title-icon pink">마음 <em>똑똑</em></div>
            <div class="title-text">정직의 섬에 도착한 세 거짓말쟁이는 어떤 삶을 살게 될까요?</div>
        </header>
        <main>
            <!-- FRAME OF PAGE -->
            <div class="basicSlider contentsBox" data-slide-container="main">
                <ul class="basicSlider_tabs" data-tabs="">
                    <li data-hover="" data-text="정직의 섬에 도착한 세 거짓말쟁이는 어떤 삶을 살게 될까요?" data-gap="true">물음</li>
                    <li data-hover="" data-text="세 거짓말쟁이가 정직의 삶에 도착했을 때의 장면을 상상해 봅시다." data-gap="true">활동</li>
                </ul>
                <ul class="basicSlider_slides" data-slides="">
                    <li class="page_1" data-quiz="toggle">
                        <img src="./images/duk_04_01_0004_101/duk_04_01_0004_1.png" alt="">
                        <div class="noteText noLine">
                            <div class="textareaWrap">
                                <textarea class="textLine afterDisplay" type="text" placeholder="직접 쓰기"
                                    data-input-obj="" data-answer=" " onfocus="" onblur="placeholder='직접 쓰기'"
                                    autocomplete="off" spellcheck="false"></textarea>
                            </div>
                            <div class="text-exam flex-wrap">
                                <div class="blueT">
                                    <p>
                                        자신과 남을 속이지 않는 삶을 살게 될 것 같습니다.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="buttonContainer">
                            <button class="writeBtn" data-answer-btn=""></button>
                        </div>
                    </li>
                    <li class="page_2" data-quiz="toggle">
                        <div class="noteText noteLine pink">
                            <div class="textareaWrap">
                                <textarea class="textLine afterDisplay" type="text" placeholder="직접 쓰기"
                                    data-input-obj="" data-answer=" " onfocus="" onblur="placeholder='직접 쓰기'"
                                    autocomplete="off" spellcheck="false"></textarea>
                            </div>
                            <div class="text-exam flex-wrap" style=" overflow-y: scroll; height: 100%; resize: none;">
                                <div class="blueT" id="text" style=" width: calc(100% - 20px);">
                                    양치기 소년은 정직의 섬에서 자신의 장난스러웠던 거짓말을 뉘우치고 다시 마을로 돌아갈 수 있는 기회를 얻었습니다. 그리고 고민 끝에 정직의 섬에 있던 마법의 거울을 통해 자신이 살던 마을 사람들은 양치기 소년의 말과 행동이 예전과 달리 신중해지고 사람들을 진실하게 대하는 모습에 조금 놀랐답니다. 마을 사람들이 처음부터 그를 믿기는 어려웠지만 양들을 정성껏 돌보며 누가 보지 않아도 정해진 시간에 스스로의 일을 해내는 양치기 소년의 행동은 마을 사람들의 마음을 움직였어요. 마침내 그는 다시 사람들의 믿음을 얻고 항상 당당하고 떳떳하게 삶을 살아가게 되었답니다.
                                    <!-- <iframe id="iframe_note1" src="./noteText2.html" frameborder="0" width="1220px"
                                        height="360px"></iframe> -->
                                </div>
                            </div>
                        </div>
                        <div class="buttonContainer">
                            <button class="writeBtn" data-answer-btn=""></button>
                        </div>
                    </li>
                </ul>
            </div>
        </main>

        <section class="popup_container" data-popup-container="">
            <ul class="popup_pages">
                <li class="fullLine whole image" data-popup-page="1" data-quiz="toggle">
                    <div class="full_content">
                        <div class="popup-boxes">
                            <div class="box-item ico_que" style="font-style: 40px; text-align: center;">
                                윤한이와 이준이는 단짝 친구입니다.<br>
                                단짝 친구는 서로를 위해 주고 이해해 줘야 합니다.<br>
                                어떻게 위하고 이해하는 것이 올바른 방법일까요?
                                <img src="./common/images/ico_que.png" class="ico" />
                            </div>
                            <div class="box-item ico_ans">
                                <img src="./common/images/ico_ans.png" class="ico" />
                                <div class="noteText noLine">
                                    <div class="textareaWrap">
                                        <textarea class="textLine afterDisplay" type="text" placeholder="직접 쓰기"
                                            data-input-obj="" data-answer=" " onfocus="" onblur="placeholder='직접 쓰기'"
                                            autocomplete="off" spellcheck="false"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="buttonContainer" style="bottom: 10px; right: 28px;">
                            <button class="resetBtn only-reset" data-type="reset" data-hover=""></button>
                        </div>
                    </div>
                </li>
            </ul>
        </section>

    </div>

    <script type="text/javascript" src="../ko/libs/js/jquery.js"></script>
    <script type="text/javascript" src="../ko/libs/js/ts.js"></script>
    <script type="text/javascript" src="../ko/libs/js/animate.js"></script>
    <script type="text/javascript" src="../ko/libs/js/dragdrop.js"></script>
    <script type="text/javascript" src="../ko/libs/js/slider.js"></script>
    <script type="text/javascript" src="../ko/libs/js/popup.js"></script>
    <script type="text/javascript" src="../ko/libs/js/scroll.js"></script>
    <script type="text/javascript" src="../ko/libs/js/controller.js"></script>
    <script type="text/javascript" src="../ko/libs/js/appear.js"></script>
    <script type="text/javascript" src="../ko/contents/js/quiz/quiz.js"></script>
    <script type="text/javascript" src="../ko/contents/js/pageManager.js"></script>
    <script type="text/javascript" src="../ko/contents/js/sprite.js"></script>
    <script type="text/javascript" src="../ko/contents/js/kmCommon.js"></script>
    <script type="text/javascript" src="./ko/contents.js"></script>
    <script type="text/javascript" src="./common/js/guide.js"></script>
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            $(document).on('click', '.basicSlider_tabs li', function () {
                if ($(this).data('text')) {
                    $('header .title-text').html($(this).data('text'));
                }
                if ($(this).attr('data-gap') == 'true') {
                    $('header').addClass('gap');
                } else {
                    $('header').removeClass('gap');
                }
                if ($(this).hasClass('twoLine')) {
                    $('header').addClass('twoLine');
                }
                else {
                    $('header').removeClass('twoLine');
                }
                if ($(this).data('text') == '세 거짓말쟁이가 정직의 삶에 도착했을 때의 장면을 상상해 봅시다.') {
                    $('#wrap header .title-text').addClass('letter-sp-2');
                } else {
                    $('#wrap header .title-text').removeClass('letter-sp-2');
                }

            });
            $(document).ready(function () {
                if ($('.basicSlider_tabs li').data('text') == '정직의 섬에 도착한 세 거짓말쟁이는 어떤 삶을 살게 될까요?') {
                    $('#wrap header').addClass('gap');
                } else {
                    $('#wrap header').removeClass('gap');
                }
            });
            $(document).on('click', '.popup_pages .innerSlider_tabs li', function () {
                let idx = $(this).index() + 1;
                $('.popup_pages .innerSlider_tabs li').removeClass('on');
                $(this).addClass('on');
                $('.popup_pages .basicSlider_slides.innerTab li').removeClass('on');
                $('.popup_pages .basicSlider_slides.innerTab li:nth-child(' + idx + ')').addClass('on');
            });

            $(document).on('click', '.popup_pages .resetBtn', function () {
                KmAudioPlayer.buttonClick();
                $('.popup_pages .textLine').val('');
            });
        });
        $(document).on('click', '.page_2 .writeBtn', function () {
            if ($(this).hasClass('reset')) {
                $('.page_2 .underline').css('display', 'none');
                $('.page_2 .noteText').removeClass('noteLine').addClass('noLine');
            } else {
                $('.page_2 .underline').css('display', 'block');
                $('.page_2 .noteText').addClass('noteLine').removeClass('noLine');
            }
        });
        $(document).on('click', '.writeBtn', function () {
            const blueT = document.querySelector('.blueT');

            blueT.addEventListener('scroll', () => {
                const scrollPosition = blueT.scrollTop;
                const lineHeight = 60;
                const lineCount = Math.floor(scrollPosition / lineHeight);
                console.log(lineCount);
                const existingLines = document.querySelectorAll('.line');
                existingLines.forEach(line => line.remove());

                for (let i = 1; i <= lineCount; i++) {
                    const line = document.createElement('div');
                    line.classList.add('line');
                    line.style.top = `${i * lineHeight}px`;
                    blueT.appendChild(line);
                }
            });
        })
        const textElement = document.getElementById('text');
        const content = textElement.innerText;
        textElement.innerHTML = '';

        const container = document.createElement('div');
        document.body.appendChild(container);

        const tempSpan = document.createElement('span');
        tempSpan.style.visibility = 'hidden';
        tempSpan.style.position = 'absolute';
        tempSpan.style.whiteSpace = 'nowrap';
        tempSpan.style.fontSize = '45px';
        tempSpan.style.lineHeight = '60px';
        tempSpan.style.letterSpacing = '1px';
        container.appendChild(tempSpan);

        let currentLine = '';
        for (let char of content) {
            tempSpan.innerText = currentLine + char;
            if (tempSpan.offsetWidth > textElement.offsetWidth) {
                const lineDiv = document.createElement('span');
                lineDiv.className = 'underLine';
                lineDiv.innerText = currentLine;
                textElement.appendChild(lineDiv);
                currentLine = char;
            } else {
                currentLine += char;
            }
        }
        if (currentLine) {
            const lineDiv = document.createElement('span');
            lineDiv.className = 'underLine';
            lineDiv.innerText = currentLine;
            textElement.appendChild(lineDiv);
        }
        container.remove();
        const allUnderLines = textElement.querySelectorAll('.underLine');
        if (allUnderLines.length > 0) {
            allUnderLines[0].remove();
        }
        // document.addEventListener("DOMContentLoaded", function () {
        //     if (
        //         navigator.userAgent.includes("Safari") &&
        //         !navigator.userAgent.includes("Chrome")
        //     ) {
        //         document.querySelectorAll('.scroll-y p').forEach(function (element) {
        //             element.classList.add('safari');
        //         });
        //     }
        // });
    </script>
</body>